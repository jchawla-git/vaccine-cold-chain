



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.1">
    
    
      
        <title>Continuous Integration - Vaccine Cold Chain Monitoring</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.982221ab.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#continuous-integration" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Vaccine Cold Chain Monitoring" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Vaccine Cold Chain Monitoring
            </span>
            <span class="md-header-nav__topic">
              Continuous Integration
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/ibm-cloud-architecture/vaccine-cold-chain.git/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Vaccine Cold Chain Monitoring" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Vaccine Cold Chain Monitoring
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/ibm-cloud-architecture/vaccine-cold-chain.git/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../.." title="What you will learn" class="md-nav__link">
      What you will learn
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Environments
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Environments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../environments/event-streams/" title="Event Streams environment" class="md-nav__link">
      Event Streams environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../environments/mongo/" title="MongoDB on IBM Cloud" class="md-nav__link">
      MongoDB on IBM Cloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../environments/postgresql/" title="Postgresql on IBM Cloud" class="md-nav__link">
      Postgresql on IBM Cloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../environments/cp4d/" title="Cloud Pak for Data" class="md-nav__link">
      Cloud Pak for Data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      AI Ladder
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        AI Ladder
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Collect
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Collect
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1-1" type="checkbox" id="nav-3-1-1">
    
    <label class="md-nav__link" for="nav-3-1-1">
      Preparing data for demonstration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-1">
        Preparing data for demonstration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../collect/generate-telemetry/" title="Generate telemetry data" class="md-nav__link">
      Generate telemetry data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../collect/cp4i-es/" title="Data ingestion and in motion with Cloud Pak for Integration" class="md-nav__link">
      Data ingestion and in motion with Cloud Pak for Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../collect/cp4d-collect-data/" title="Collect data with Cloud Pak for Data" class="md-nav__link">
      Collect data with Cloud Pak for Data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Analyze
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Analyze
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../analyze/ws-ml-dev/" title="Define the anomaly detection scoring model with Watson Studio" class="md-nav__link">
      Define the anomaly detection scoring model with Watson Studio
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Infuse
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Infuse
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../infuse/simul-app/" title="Develop the simulation app" class="md-nav__link">
      Develop the simulation app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infuse/dev-scoring/" title="Develop scoring app with cloud pak for application" class="md-nav__link">
      Develop scoring app with cloud pak for application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infuse/build-run/" title="Build and run the solution on Openshift" class="md-nav__link">
      Build and run the solution on Openshift
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infuse/integration-tests/" title="Run integration tests" class="md-nav__link">
      Run integration tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../bpm/readme/" title="Engineer dispatching with Business process with Cloud Pak for Automation" class="md-nav__link">
      Engineer dispatching with Business process with Cloud Pak for Automation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Devops
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Devops
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../infuse/simul-app/" title="Develop the simulation app" class="md-nav__link">
      Develop the simulation app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infuse/dev-scoring/" title="Develop the scoring app with event messaging and microprofile" class="md-nav__link">
      Develop the scoring app with event messaging and microprofile
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Continuous Integration
      </label>
    
    <a href="./" title="Continuous Integration" class="md-nav__link md-nav__link--active">
      Continuous Integration
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview-of-continuous-integration-workflows-for-this-project" title="Overview of Continuous Integration workflows for this project" class="md-nav__link">
    Overview of Continuous Integration workflows for this project
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-validate-docker-secrets" title="1 - Validate Docker Secrets" class="md-nav__link">
    1 - Validate Docker Secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-build-component-images" title="2 - Build Component Images" class="md-nav__link">
    2 - Build Component Images
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#appsody-build-for-the-simulator-microservice" title="Appsody build for the Simulator microservice" class="md-nav__link">
    Appsody build for the Simulator microservice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#container-build-for-the-spring-container-microservice" title="Container build for the Spring Container microservice" class="md-nav__link">
    Container build for the Spring Container microservice
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-gitops-updates" title="3 - GitOps Updates" class="md-nav__link">
    3 - GitOps Updates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cd/" title="Continuous Deployment" class="md-nav__link">
      Continuous Deployment
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../bpm/readme/" title="Engineer dispatching with Business process with Cloud Pak for Automation" class="md-nav__link">
      Engineer dispatching with Business process with Cloud Pak for Automation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../compendium/" title="Compendium" class="md-nav__link">
      Compendium
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview-of-continuous-integration-workflows-for-this-project" title="Overview of Continuous Integration workflows for this project" class="md-nav__link">
    Overview of Continuous Integration workflows for this project
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-validate-docker-secrets" title="1 - Validate Docker Secrets" class="md-nav__link">
    1 - Validate Docker Secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-build-component-images" title="2 - Build Component Images" class="md-nav__link">
    2 - Build Component Images
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#appsody-build-for-the-simulator-microservice" title="Appsody build for the Simulator microservice" class="md-nav__link">
    Appsody build for the Simulator microservice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#container-build-for-the-spring-container-microservice" title="Container build for the Spring Container microservice" class="md-nav__link">
    Container build for the Spring Container microservice
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-gitops-updates" title="3 - GitOps Updates" class="md-nav__link">
    3 - GitOps Updates
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ibm-cloud-architecture/vaccine-cold-chain.git/edit/master/docs/devops/ci.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="continuous-integration">Continuous Integration</h1>
<p>Our Continuous Integration (CI) approach is one of <em>"zero-infrastructure overhead"</em>. As such, we utilize <a href="https://github.com/features/actions">GitHub Actions</a> to build and push the microservice's associated container image to Docker Hub for public consumption.  The GitHub Actions workflows are defined in the owning repository's <code>.github/workflows/dockerbuild.yaml</code> file.</p>
<p>The <strong>Reefer Simulator</strong> microservice's CI implementation can be found via <a href="https://github.com/ibm-cloud-architecture/refarch-reefer-ml/blob/master/.github/workflows/dockerbuild.yaml">/.github/workflows/dockerbuild.yaml</a> in the <a href="https://github.com/ibm-cloud-architecture/refarch-reefer-ml/">refarch-reefer-ml</a> repository, while the <strong>SpringContainerMS</strong> microservice's CI implementation can be found via <a href="https://github.com/ibm-cloud-architecture/refarch-kc-container-ms/blob/master/.github/workflows/dockerbuild.yaml">.github/workflows/dockerbuild.yaml</a> in the <a href="https://github.com/ibm-cloud-architecture/refarch-kc-container-ms/">refarch-kc-container-ms</a> repository. For results of individual completed CI workflow actions, you can view the results via the <strong>Actions</strong> tab of a given repository.</p>
<h2 id="overview-of-continuous-integration-workflows-for-this-project">Overview of Continuous Integration workflows for this project</h2>
<p>The continuous integration workflow for our project looks in the figure below, which are detailing in next sections:</p>
<p><img alt="CI main" src="../images/ci-main.png" /></p>
<p>On the left side, the developer uses his environment with Appsody CLI to build, and test his code, once tests run successfully, he commits and pushes the code to the master branch, then the github workflow triggers...</p>
<h3 id="1-validate-docker-secrets">1 - Validate Docker Secrets</h3>
<p>The first job in each GitHub Actions workflow, <strong><a href="https://github.com/ibm-cloud-architecture/refarch-reefer-ml/blob/df754fa54f4a41b85e93a8f059977bdaccd67ddc/.github/workflows/dockerbuild.yaml#L18-L52">validate-docker-secrets</a></strong>, ensures that all the necessary Secrets are defined on the repository under which the build action is running. Similar to Kubernetes Secrets, <a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/creating-and-using-encrypted-secrets">GitHub Repository Secrets</a> allow you to store encrypted, sensitive information in a programmatically accessible way.</p>
<p>Here is an example of such secret definitions:</p>
<p><img alt="Gihub Secrets" src="../images/github-secrets.png" /></p>
<h3 id="2-build-component-images">2 - Build Component Images</h3>
<h4 id="appsody-build-for-the-simulator-microservice">Appsody build for the Simulator microservice</h4>
<p>The <a href="https://github.com/ibm-cloud-architecture/refarch-reefer-ml/tree/master/simulator">simulator</a> microservice is built using the <a href="https://appsody.dev">Appsody</a> open-source project, while leveraging the <a href="https://github.com/appsody/stacks/tree/master/incubator/python-flask">Python Flask Appsody Stack</a> for its underlying framework.  The project can be easily built in a local environment by issuing the <code>appsody build</code> commands, further documented on the Appsody site under <a href="https://appsody.dev/docs/using-appsody/building-and-deploying">Building and deploying</a>.</p>
<p>The second job in the Simulator microservice workflow, <strong><a href="https://github.com/ibm-cloud-architecture/refarch-reefer-ml/blob/df754fa54f4a41b85e93a8f059977bdaccd67ddc/.github/workflows/dockerbuild.yaml#L53">build-simulator-image</a></strong>, runs on a base Ubuntu container image, creates a new semantically-versioned tag <em>(in the form of <code>0.1.2</code>)</em> for the repository, installs the latest Appsody CLI tools, performs the <code>appsody build</code> command with the <a href="https://appsody.dev/docs/using-appsody/building-and-deploying#building-your-runtime-docker-image-with-appsody">appropriate parameters</a>, tags the newly created version-specific image with <code>latest</code> as well, and pushes the image with both tags to the public Docker Hub repository defined by the aforementioned repository secrets.</p>
<p><img alt="Docker hub repository" src="../images/dockerhub-repo.png" /></p>
<h4 id="container-build-for-the-spring-container-microservice">Container build for the Spring Container microservice</h4>
<p>The <a href="https://github.com/ibm-cloud-architecture/refarch-kc-container-ms/tree/master/SpringContainerMS">SpringContainerMS</a> microservice is developed using the Spring Boot framework, compiled via <code>maven</code> and an associated <code>pom.xml</code> file, and packaged via a traditional Dockerfile. This project can be built locally via Maven and/or Docker, however it is recommended to consume the published container images that are a result of this continuous integration.</p>
<p>The second job in the <a href="https://github.com/ibm-cloud-architecture/refarch-kc-container-ms/blob/master/.github/workflows/dockerbuild.yaml">SpringContainerMS microservice github action workflow</a>, <strong><a href="https://github.com/ibm-cloud-architecture/refarch-kc-container-ms/blob/f79821a3f6eeaa5b52048ef2a2aa32bdc5f58dd5/.github/workflows/dockerbuild.yaml#L48-L95">build-springcontainer-image</a></strong>, runs on a base Ubuntu container image, creates a new semantically-versioned tag <em>(in the form of <code>0.1.2</code>)</em> for the repository, performs a traditional <code>docker build</code> using the <a href="https://github.com/ibm-cloud-architecture/refarch-kc-container-ms/blob/master/SpringContainerMS/Dockerfile">SpringContainerMS/Dockerfile</a>, tags the newly created version-specific image with <code>latest</code> as well, and pushes the image with both tags to the public Docker Hub repository defined by the aforementioned repository secrets.</p>
<h3 id="3-gitops-updates">3 - GitOps Updates</h3>
<p>The final job, <strong><a href="https://github.com/ibm-cloud-architecture/refarch-kc-container-ms/blob/f79821a3f6eeaa5b52048ef2a2aa32bdc5f58dd5/.github/workflows/dockerbuild.yaml#L96-L104">gitops-repo-webhook</a></strong>, is a linkage to our general continuous deployment process, which is GitOps-based and available via <a href="https://github.com/ibm-cloud-architecture/refarch-kc-gitops">ibm-cloud-architecture/refarch-kc-gitops</a>. This step performs a webhook call to our GitOps repository and notifies that repository's GitHub Actions that an update to one of its component's container images has been made and it should scan for the latest version of all the known container images and update the associated YAML files for environment updates. The repository action dispatcher triggers the git action workflow as defined <a href="https://github.com/ibm-cloud-architecture/refarch-kc-gitops/blob/master/.github/workflows/update-gitops-deployments-(eda-integration).yaml">here</a> so the corresponding yaml files (appsody and helm configurations) can be updated (See <a href="https://github.com/ibm-cloud-architecture/actions-update-gitops">this repository</a> to understand the action update gitops).</p>
<p>Here is an example of <a href="https://github.com/ibm-cloud-architecture/refarch-kc-gitops/blob/eda-integration/gse-eda-demos.us-east.containers.appdomain.cloud/reefersimulator/appsody/app-deploy.yaml">appsody.yaml</a> automatically modified in the github repository:</p>
<div class="codehilite"><pre><span></span><span class="nn">...</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">image.opencontainers.org/title</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">reefer-simulator</span>
    <span class="nt">stack.appsody.dev/version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.1.6</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">reefer-simulator</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">applicationImage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ibmcase/kcontainer-reefer-simulator-appsody:0.1.26</span>
</pre></div>

<p>Further description of this continuous deployment process is covered in <a href="../cd/">Continuous Deployment note</a>.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../infuse/dev-scoring/" title="Develop the scoring app with event messaging and microprofile" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Develop the scoring app with event messaging and microprofile
              </span>
            </div>
          </a>
        
        
          <a href="../cd/" title="Continuous Deployment" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Continuous Deployment
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b806dc00.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>